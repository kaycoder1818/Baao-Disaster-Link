<!-- templates\home.html -->
<!DOCTYPE html>
<html lang="en">

  <head>
      <meta charset="UTF-8">
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
       <!-- prevent user zoom on mobile browsers by controlling the viewport settings in your HTML -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <title>Home - Baao Disaster Link</title>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

      <!-- Link to the CSS file in the static folder -->
      <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}"> -->

      <!-- <script>
        // For CSS test
        const testImageCSS = new Image();

        // For chatbot image test
        const testImageChatbot = new Image();

        // Declare a global Image object to test loading
        const testImageJS = new Image();
      </script> -->

      <!-- <script>
        // CSS test
        testImageCSS.onload = function() {
          console.log("[+] use raw path");
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = '../static/css/home.css';
          document.head.appendChild(link);
        };
        testImageCSS.onerror = function() {
          console.log("[+] use flask render template");
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = '{{ url_for("static", filename="css/home.css") }}';
          document.head.appendChild(link);
        };
        testImageCSS.src = '.mobile'; // or other test image path
      </script> -->


      <script>
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = '../static/css/home.css';

        // Fallback to Flask path if raw CSS fails to load
        link.onerror = function () {
          console.log("[+] raw CSS failed, using Flask-rendered path");
          const fallbackLink = document.createElement('link');
          fallbackLink.rel = 'stylesheet';
          fallbackLink.href = '{{ url_for("static", filename="css/home.css") }}';
          document.head.appendChild(fallbackLink);
        };

        link.onload = function () {
          console.log("[+] raw CSS loaded successfully");
        };

        document.head.appendChild(link);
      </script>


      <!-- <script src="{{ url_for('static', filename='js/home.js') }}" defer></script> -->

    <!-- <script>

      testImageJS.onload = function() {
        console.log("[+] use raw path for JS");
        const script = document.createElement('script');
        script.src = '../static/js/home.js';  // raw path
        document.head.appendChild(script);
      };

      testImageJS.onerror = function() {
        console.log("[+] use flask render template for JS");
        const script = document.createElement('script');
        script.src = '{{ url_for("static", filename="js/home.js") }}'; // Flask url_for
        document.head.appendChild(script);
      };

      testImageJS.src = '.mobile'; // or any file path to test (like a small image file)
    </script> -->

    <script>
      const script = document.createElement('script');
      script.src = '../static/js/home.js'; // Try raw path first

      script.onload = function () {
        console.log("[+] raw JS loaded successfully");
      };

      script.onerror = function () {
        console.log("[+] raw JS failed, using Flask-rendered path");
        const fallbackScript = document.createElement('script');
        fallbackScript.src = '{{ url_for("static", filename="js/home.js") }}';
        document.head.appendChild(fallbackScript);
      };

      document.head.appendChild(script);
    </script>


  </head>

  <body>
    <div class="page-container">
      <div class="dashboard-wrapper">  
          <div class="horizontal-box" >
              <!-- <div class="nested-box-image" >
                <img src="{{ url_for('static', filename='images/app-logoo.jpg') }}" class="app-logo">
              </div> -->
              <div class="nested-box app-title-text">
                  BAAO DISASTER LINK
              </div>

              <!-- <div class="nested-box" >
                <div class="spacer-box"> </div>
              </div> -->
          </div>
    
        <div class="horizontal-box" 
          style="
          /* border: solid black;  */
          justify-content: space-around;  
          ">

          <div class="spacer-box"> </div>

          <div class="nested-box nested-box-bold"
            style="color: white; font-size: 30px;">
            Baao
          </div>

          <div class="spacer-box-2"> </div>

          <!-- <div class="nested-box">
            <div class="icon-container" id="settings-button"  onclick="navigateToSettings()">
              <i class="fas fa-cog history-icon"></i>
            </div>
            <div class="spinner" id="settings-spinner"></div>
          </div> -->

          <div class="nested-box">
            <div class="icon-container" id="settings-button" onclick="navigateToSettings()">
              <i class="fas fa-cog history-icon"></i>
            </div>
            <div class="spinner" id="settings-spinner" style="display: none;"></div>
          </div>

        </div>
    
        <div class="horizontal-box">
          <div class="nested-box nested-box-bold"
            style="color: white; font-size: 20px;">
              Today
          </div>
          <div class="nested-box" >
              <div class="spacer-box-3"> </div> 
          </div>
        </div>
    
          <div class="horizontal-box" >
              <div class="nested-box" >
                  <div class="card-gauge">
                      <div class="number-gauge" id="outside-temp" >-</div>
                      <div class="label-gauge"  id="outside-weather" >-</div>
                  </div>
              </div>
          </div>
    
          <div class="horizontal-box shadowed-box bg-light-blue">
              <div class="nested-box" id="wind-box" >
                  <div class="card-gauge">
                      <div class="card-gauge">
                        <div class="nested-box" >
                          <i class="fas fa-wind history-icon"></i> 
                        </div>
                        <div class="nested-box" >
                          <div class="number-gauge-small text-white" id="wind-speed">-</div> 
                        </div>
                        <div class="nested-box" >
                          <div class="label-gauge">Wind</div>
                        </div>
                      </div>
                  </div>
              </div>
              <div class="nested-box" >
                  <div class="nested-box" id="humidity-box">
                      <div class="card-gauge">
                        <div class="nested-box" >
                          <i class="fas fa-tint history-icon"></i> <!-- Humidity icon -->
                        </div>
                        <div class="nested-box" >
                          <div class="number-gauge-small text-white" id="humidity">-</div> 
                        </div>
                        <div class="nested-box" >
                          <div class="label-gauge" id="humidity">Humidity</div>
                        </div>
                      </div>
                  </div>
              </div>

              <div class="nested-box" >
                  <div class="nested-box" id="visibility-box">
                      <div class="card-gauge">
                        <div class="nested-box" >
                          <i class="fas fa-eye history-icon"></i> <!-- Visibility icon -->
                        </div>
                        <div class="nested-box" >
                          <div class="number-gauge-small text-white" id="visibility">-</div> 
                        </div>
                        <div class="nested-box" >
                          <div class="label-gauge" >Visibility</div>
                        </div>
                      </div>
                  </div>
              </div>

          </div>

          <div class="horizontal-box" >
            <div class="spacer-box-4">
            </div>
          </div>
    
          <div class="horizontal-box horizontal-spacing" >
              <div class="nested-box" id="evacuation-box">
                  <div class="card-gauge shadow-gray">
                      <div class="nested-box" >
                        <i class="fas fa-house history-icon"></i> <!-- Evacuation icon -->
                      </div>
                      <div class="nested-box" >
                        <div class="label-gauge">Evacuation</div>
                      </div>
                      <div class="nested-box" >
                        <div class="label-gauge">Place</div>
                      </div>
                  </div>
              </div>
              <div class="nested-box" >
                  <div class="nested-box" id="weather-box">
                      <div class="card-gauge shadow-gray">

                        <div class="nested-box" >
                          <i class="fas fa-cloud-sun history-icon"></i> <!-- Weather icon -->
                        </div>
                        <div class="nested-box" >
                          <div class="label-gauge">Weather</div>
                        </div>
                        <div class="nested-box" >
                          <div class="label-gauge">Update</div>
                        </div>

                      </div>
                  </div>
              </div>
          </div>

          <div class="spacer-box">
          </div>

          <div class="horizontal-box horizontal-spacing" >
              <div class="nested-box " id="flood-box">
                  <div class="card-gauge shadow-gray nested-spacing">

                      <div class="nested-box" >
                        <i class="fas fa-water history-icon"></i> <!-- Flood icon -->
                      </div>
                      <div class="nested-box" >
                        <div class="label-gauge">Flooding</div>
                      </div>
                      <div class="nested-box" >
                        <div class="label-gauge">Area</div>
                      </div>

                  </div>
              </div>
              <div class="nested-box" >
                  <div class="nested-box" id="accident-box">
                      <div class="card-gauge shadow-gray">
                        
                      <div class="nested-box" id="accident-box">
                        <i class="fas fa-car-crash history-icon"></i> <!-- Accident icon -->
                      </div>
                      <div class="nested-box" >
                        <div class="label-gauge">Accident</div>
                      </div>
                      <div class="nested-box" >
                        <div class="label-gauge">Prone</div>
                      </div>

                      </div>
                  </div>
              </div>
          </div>
    
      </div>
      <div class="bottom-nav">
        <i class="fas fa-home nav-icon" title="Home" id="nav-home"></i>
        <i class="fas fa-phone nav-icon" title="Phonebook" id="nav-emergency"></i>
        <i class="far fa-address-book nav-icon" title="Phonebook" id="nav-phone"></i>
      </div>
    </div>
  </body>


<!-- Chatbot Floating Button -->
<!-- Chatbot UI -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


<div id="chatbot">
  <div id="chatbot-toggle">
    <!-- <img src="{{ url_for('static', filename='images/bot-svgrepo-com.svg') }}" alt="Chatbot"> -->

    <!-- <script>
      // Chatbot image test
      testImageChatbot.onload = function() {
        console.log("[+] use raw path for chatbot image");
        const img = document.createElement('img');
        img.src = '../static/images/bot-svgrepo-com.svg';
        img.alt = 'Chatbot';
        img.className = 'app-logo';
        document.getElementById('chatbot-toggle').appendChild(img);
      };
      testImageChatbot.onerror = function() {
        console.log("[+] use flask render template for chatbot image");
        const img = document.createElement('img');
        img.src = '{{ url_for("static", filename="images/bot-svgrepo-com.svg") }}';
        img.alt = 'Chatbot';
        img.className = 'app-logo';
        document.getElementById('chatbot-toggle').appendChild(img);
      };
      testImageChatbot.src = '.mobile'; // same test path or another test image
    </script> -->


    <script>
      const chatbotImg = document.createElement('img');
      chatbotImg.src = '../static/images/bot-svgrepo-com.svg'; // Try raw path first
      chatbotImg.alt = 'Chatbot';
      chatbotImg.className = 'app-logo';

      chatbotImg.onload = function () {
        console.log("[+] raw chatbot image loaded successfully");
        document.getElementById('chatbot-toggle').appendChild(chatbotImg);
      };

      chatbotImg.onerror = function () {
        console.log("[+] raw chatbot image failed, using Flask-rendered path");
        const fallbackImg = document.createElement('img');
        fallbackImg.src = '{{ url_for("static", filename="images/bot-svgrepo-com.svg") }}';
        fallbackImg.alt = 'Chatbot';
        fallbackImg.className = 'app-logo';
        document.getElementById('chatbot-toggle').appendChild(fallbackImg);
      };

    </script>


  </div>

  <div id="chatbot-modal">
    <div id="chatbot-header">Chatbot</div>
    <div id="chatbot-conversation"></div>
    <div id="chatbot-input-area">
      <input type="text" id="chatbot-input" placeholder="Type your message..." />
      <button id="chatbot-send">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>
</div>


</html>

