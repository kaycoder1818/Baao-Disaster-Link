<!-- templates\home.html -->
<!DOCTYPE html>
<html lang="en">

  <head>
      <meta charset="UTF-8">
      <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
       <!-- prevent user zoom on mobile browsers by controlling the viewport settings in your HTML -->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <title>Weather - Baao Disaster Link</title>
      <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> -->
      <script>
        const cdnLink = document.createElement('link');
        cdnLink.rel = 'stylesheet';
        cdnLink.href = '../static/css/font-awesome/6.4.0/css/all.min.css'; // Raw/static attempt

        cdnLink.onerror = function () {
          console.warn("[!] raw CSS failed, using Flask-rendered path");

          const fallbackLink = document.createElement('link');
          fallbackLink.rel = 'stylesheet';
          fallbackLink.href = "{{ url_for('static', filename='css/font-awesome/6.4.0/css/all.min.css') }}"; // Jinja2 rendered
          document.head.appendChild(fallbackLink);
        };

        cdnLink.onload = function () {
          console.log("[+] raw CSS loaded successfully");
        };

        document.head.appendChild(cdnLink); 
      </script>
      <!-- Link to the CSS file in the static folder -->
      <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/weather.css') }}"> -->

        <script>
            const guideCSS = document.createElement('link');
            guideCSS.rel = 'stylesheet';
            guideCSS.href = '../static/css/weather.css'; // Try raw path first

            guideCSS.onerror = function () {
                console.log("[+] raw CSS failed, using Flask-rendered path");
                const fallbackLink = document.createElement('link');
                fallbackLink.rel = 'stylesheet';
                fallbackLink.href = '{{ url_for("static", filename="css/weather.css") }}';
                document.head.appendChild(fallbackLink);
            };

            guideCSS.onload = function () {
                console.log("[+] raw CSS loaded successfully");
            };

            document.head.appendChild(guideCSS);
        </script>

      <!-- <script src="{{ url_for('static', filename='js/weather.js') }}" defer></script> -->

        <script>
            const script = document.createElement('script');
            script.src = '../static/js/weather.js'; // Try raw path first

            script.onload = function () {
                console.log("[+] raw JS loaded successfully");
            };

            script.onerror = function () {
                console.log("[+] raw JS failed, using Flask-rendered path");
                const fallbackScript = document.createElement('script');
                fallbackScript.src = '{{ url_for("static", filename="js/weather.js") }}';
                document.head.appendChild(fallbackScript);
            };

            document.head.appendChild(script);
        </script>

  </head>

  <body>
    <div id="app" style="display: none;">
      <div class="page-container">

        
        <div class="spacer-box-2"> </div>

        <div class="dashboard-wrapper">  
            <div class="horizontal-box" >
                <!-- <div class="nested-box-image" >
                  <img src="{{ url_for('static', filename='images/app-logoo.jpg') }}" class="app-logo">
                </div> -->
                <div class="nested-box app-title-text">
                    BAAO DISASTER LINK
                </div>

                <!-- <div class="nested-box" >
                  <div class="spacer-box"> </div>
                </div> -->
            </div>
      
          <div class="horizontal-box" 
            style="
            /* border: solid black;  */
            justify-content: space-around;  
            ">

            <div class="back-button">
              <!-- <a href="/home" title="Go Back">
                <i class="fas fa-arrow-left"></i>
              </a> -->
            <a id="back-link" href="/home" title="Go Back">
                <i class="fas fa-arrow-left"></i>
            </a>
            </div>

            <div class="spacer-box-5"> </div>

            <div class="nested-box nested-box-bold"
              style="color: white; font-size: 30px;">
              Baao
            </div>

            <div class="spacer-box-6"> </div>

            <!-- <div class="nested-box"> -->
              <!-- <div class="icon-container" id="history-button"  onclick="navigateToHistory()"> -->
                <!-- <img src="{{ url_for('static', filename='images/history.svg') }}" alt="History Icon" class="history-icon"> -->
                <!-- <i class="fas fa-cog history-icon"></i> -->
              <!-- </div> -->
              <!-- <div class="spinner" id="history-spinner"></div> -->
            <!-- </div> -->

          </div>

          <div class="vertical-box">
            <div class="nested-box date-container">
              <div class="date-text">-</div>
            </div>

            <div class="nested-box" >
                  <div class="spacer-box"> </div>
            </div>

            <div class="nested-box cloud-container" >
                <div class="label-gauge" id="outside-weather">-</div>
            </div>

          </div>

          <div class="horizontal-box" >
              <div class="nested-box" >
                  <!-- <div class="card-gauge"> -->
                      <div class="number-gauge" id="outside-temp">-</div>
                  <!-- </div> -->
              </div>
              
          </div>

          <div class="horizontal-box" >
            <div class="nested-box" >
                  <div class="spacer-box"> </div>
            </div>
          </div>
          
      
            <div class="horizontal-box shadowed-box bg-light-blue">
                <div class="nested-box" id="wind-box" >
                    <div class="card-gauge">
                        <div class="card-gauge">
                          <div class="nested-box" >
                            <i class="fas fa-wind history-icon"></i> 
                          </div>
                          <div class="nested-box" >
                            <div class="number-gauge-small text-white" id="wind-speed">-</div> 
                          </div>
                          <div class="nested-box" >
                            <div class="label-gauge">Wind</div>
                          </div>
                        </div>
                    </div>
                </div>
                <div class="nested-box" >
                    <div class="nested-box" id="humidity-box">
                        <div class="card-gauge">
                          <div class="nested-box" >
                            <i class="fas fa-tint history-icon"></i> <!-- Humidity icon -->
                          </div>
                          <div class="nested-box" >
                            <div class="number-gauge-small text-white" id="humidity">-</div> 
                          </div>
                          <div class="nested-box" >
                            <div class="label-gauge">Humidity</div>
                          </div>
                        </div>
                    </div>
                </div>

                <div class="nested-box" >
                    <div class="nested-box" id="visibility-box">
                        <div class="card-gauge">
                          <div class="nested-box" >
                            <i class="fas fa-eye history-icon"></i> <!-- Visibility icon -->
                          </div>
                          <div class="nested-box" >
                            <div class="number-gauge-small text-white" id="visibility">-</div> 
                          </div>
                          <div class="nested-box" >
                            <div class="label-gauge">Visibility</div>
                          </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="horizontal-box" >
              <div class="spacer-box-4">
              </div>
            </div>
      
            <!-- weather navigation -->
            <!-- weather card -->


            <div class="horizontal-box weekly-forecast-nav">
                  <!-- <div class="nested-box weekly-forecast-text">
                      Weekly Forecast
                  </div> -->

                  <div id="weekly-forecast-btn" class="nested-box weekly-forecast-text" style="cursor: pointer;">
                    Typhoon Forecast
                  </div>


                  <div class="nested-box arrow-icon" id="forecast-link">
                      <i class="fas fa-arrow-right"></i>
                  </div>
              </div>

              <div class="nested-box" >
                    <div class="spacer-box"> </div>
              </div>

              <div class="horizontal-box weather-cards-container">

                <div class="vertical-box-2" >
                  <div class="weather-card">
                      <div class="card-date">-</div>
                      <div class="card-icon">
                          <img src="{{ url_for('static', filename='images/cloudy.svg') }}" alt="weather-icon">
                      </div>
                      <div class="card-description">-</div>
                      <div class="card-temp">-</div>
                  </div>

                  <div class="nested-box"> 
                    <div class="card-day">Today</div>
                  </div>
                </div>

                <div class="vertical-box-2" >
                  <div class="weather-card">
                      <div class="card-date">-</div>
                      <div class="card-icon">
                          <img src="{{ url_for('static', filename='images/thunder2.svg') }}" alt="weather-icon">
                      </div>
                      <div class="card-description">-</div>
                      <div class="card-temp">-</div>
                  </div>

                  <div class="nested-box"> 
                    <div class="card-day">Tomorrow</div>
                  </div>
                </div>

                <div class="vertical-box-2" >
                  <div class="weather-card">
                      <div class="card-date">-</div>
                      <div class="card-icon">
                          <img src="{{ url_for('static', filename='images/rain.svg') }}" alt="weather-icon">
                      </div>
                      <div class="card-description">-</div>
                      <div class="card-temp">-</div>
                  </div>

                  <div class="nested-box"> 
                    <div class="card-day">-</div>
                  </div>
                </div>

                <div class="vertical-box-2" >
                  <div class="weather-card">
                      <div class="card-date">-</div>
                      <div class="card-icon">
                          <img src="{{ url_for('static', filename='images/sunny.svg') }}" alt="weather-icon">
                      </div>
                      <div class="card-description">-</div>
                      <div class="card-temp">-</div>
                  </div>

                  <div class="nested-box"> 
                    <div class="card-day">-</div>
                  </div>
                </div>
              </div>
              
        </div>

        <div class="bottom-nav">
          <i class="fas fa-home nav-icon" title="Home" id="nav-home"></i>
          <i class="fas fa-phone nav-icon" title="Phonebook" id="nav-emergency"></i>
          <i class="far fa-address-book nav-icon" title="Phonebook" id="nav-phone"></i>
        </div>

      </div>
    </div>

    <!-- Modal Structure -->
    <div id="forecast-modal" class="modal hidden" style="
      position:fixed; top:0; left:0; width:100%; height:100%; 
      background: rgba(0,0,0,0.5); display:flex; justify-content:center; align-items:center; z-index: 9999;">
      
      <div id="modal-content" style="
        position:relative; 
        background:#fff; 
        width:90vmin; 
        height:90vmin; 
        border-radius:8px; 
        box-shadow: 0 0 15px rgba(0,0,0,0.3); 
        padding:1rem; 
        display:flex; 
        flex-direction:column; 
        justify-content:center; 
        align-items:center;
      ">
        <button id="close-modal-btn" style="
          position:absolute; top:10px; right:10px; 
          font-size:1.2rem; cursor:pointer; 
          background: transparent; border: none;
        ">✖</button>

        <!-- Spinner Loader -->
        <div id="spinner" style="
          display:flex; 
          justify-content:center; 
          align-items:center; 
          flex:1;
        ">
          <div class="loader"></div>
        </div>

        <img id="typhoon-image" src="" alt="Typhoon Forecast" style="
          max-width:100%; 
          max-height:100%; 
          display:none; 
          object-fit: contain;
        " />
      </div>
    </div>




  </body>
  
</html>
